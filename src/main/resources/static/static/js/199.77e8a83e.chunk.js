"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[199,319],{25199:(e,a,s)=>{s.r(a),s.d(a,{default:()=>j});var i=s(80045),l=s(22555),t=s(65043),n=s(19267),r=s(93946),d=s(52879),o=s.n(d),c=s(81366),m=s(79456),h=s(74319),u=(s(44650),s(70579));const x=["email"],p=["email"],j=()=>{var e,a,s,d;const j=(0,t.useRef)(null),N=(0,t.useRef)(null),g=(0,t.useRef)(null),v=(0,t.useRef)(null),[b,f]=(0,t.useState)(!1),[A,y]=(0,t.useState)(!1),[C,F]=(0,t.useState)([]),[k,S]=(0,t.useState)(!1),[P,T]=(0,t.useState)({}),[L,D]=(0,t.useState)(!1),[O,K]=(0,t.useState)({}),[U,E]=(0,t.useState)(0),[I,_]=(0,t.useState)(0),[w,G]=(0,t.useState)(""),[M,R]=(0,t.useState)(" ");let[$,B]=(0,t.useState)({});const[q,V]=(0,t.useState)(),[H,Z]=(0,t.useState)(),[Q,W]=(0,t.useState)([]),[Y,z]=(0,t.useState)("P"),[J,X]=(0,t.useState)(!1),[ee,ae]=(0,t.useState)({}),[se,ie]=(0,t.useState)(),[le,te]=(0,t.useState)(""),ne=(0,m.d4)((e=>e.twad.office.officeId)),re=(0,m.d4)((e=>e.twad.userName)),[de,oe]=(0,t.useState)(["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"]),[ce,me]=(0,t.useState)(["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thiruvallur","Thiruvarur","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupathur","Tiruppur","Tiruvannamalai","Vellore","Viluppuram","Virudhunagar"]);(0,t.useEffect)((()=>{const e=document.getElementById("email"),a=setTimeout((()=>{e&&e.value&&e.value!==P.email&&(ue({target:{name:"email",value:e.value}}),he(e.value.trim())?K((e=>{const{email:a}=e;return(0,i.A)(e,x)})):K((e=>(0,l.A)((0,l.A)({},e),{},{email:"Invalid email address"}))))}),500);return()=>clearTimeout(a)}),[]),(0,t.useEffect)((()=>{const e=document.getElementById("email");e&&(e.focus(),e.blur())}),[]);const he=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),ue=e=>{console.log(O,"errors");const{name:a}=e.target;let{value:s}=e.target;["addressLine1","addressLine2","addressLine3"].includes(a)||(s=s.trim());let i=(0,l.A)({},O);var t,n;if("aadhaarNo"===a)s=s.replace(/\D/g,""),(null===(t=s)||void 0===t?void 0:t.length)>12&&(s=s.slice(0,12)),12!==(null===(n=s)||void 0===n?void 0:n.length)?i.aadhaarNo="Aadhaar number must be exactly 12 digits":delete i.aadhaarNo,T((e=>(0,l.A)((0,l.A)({},e),{},{[a]:s})));else if("panNo"===a)if(s=s.toUpperCase(),console.log("pan value",s),""===s)s=null,console.log("pan value",s),delete i.panNo,T((e=>(0,l.A)((0,l.A)({},e),{},{[a]:s})));else if(/^[A-Z0-9]*$/.test(s)){var r;10===(null===(r=s)||void 0===r?void 0:r.length)?/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(s)?delete i.panNo:i.panNo="Invalid PAN format":i.panNo="PAN must be exactly 10 characters",T((e=>(0,l.A)((0,l.A)({},e),{},{[a]:s})))}else i.panNo="PAN can contain only letters and digits";else if("mobileNumber"===a){let e=s.replace(/\D/g,"");e=e.replace(/^0+/,""),e.length>10&&(e=e.slice(0,10)),10===e.length&&/^[6-9]/.test(e)?delete i.mobileNumber:i.mobileNumber="Mobile number must be exactly 10 digits and start with 6-9",T((s=>(0,l.A)((0,l.A)({},s),{},{[a]:e})))}else if("email"===a)s=s.toLowerCase(),""===s||he(s)?delete i.email:i.email="Invalid email address",T((e=>(0,l.A)((0,l.A)({},e),{},{[a]:s})));else if("pincode"===a){let e=s.replace(/\D/g,"");e.length>6&&(e=e.slice(0,6)),6!==e.length?i.pincode="Pincode must be exactly 6 digits":delete i.pincode,T((s=>(0,l.A)((0,l.A)({},s),{},{[a]:e})))}else T((e=>(0,l.A)((0,l.A)({},e),{},{[a]:s}))),delete i[a];K(i)};function xe(e){z(e),ae({}),f(!0);let a=o().getApiData;const s={paymentOfficeId:ne,pensionerTypeId:e};c.A.callEndPoint(a,s).then((e=>{setTimeout((()=>{W(e),ae(e),F(e),f(!1)}),1e3)}))}return(0,u.jsxs)("div",{className:"ms-3",children:[(0,u.jsx)(r.sK,{children:(0,u.jsxs)(r.$l,{role:"group","aria-label":"Basic checkbox toggle button group",children:[(0,u.jsx)(r.CK,{type:"radio",id:"Pensioner",name:"options",onClick:()=>{xe("P")},button:{color:"primary",variant:"outline"},autoComplete:"off",label:"Pensioner"}),(0,u.jsx)(r.CK,{type:"radio",id:"FamilyPensioner",name:"options",button:{color:"primary",variant:"outline"},autoComplete:"off",onClick:()=>{xe("F")},label:"Family Pensioner"}),(0,u.jsx)(r.UF,{md:8,children:"F"===Y?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h.default,{data:Q,fileName:"FamilyPensioner"})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h.default,{data:Q,fileName:"Pensioner"})})})]})}),(0,u.jsx)(r.sK,{children:(0,u.jsx)(r.UF,{md:6,children:(0,u.jsx)(r.OG,{className:"m-2",type:"text",id:"ppoSearch",name:"ppoSearch",placeholder:"SEARCH BY PPO",value:se,onChange:e=>{!function(e,a){const s=e.trim();if(ie(s),"search"===a)if(console.log(e.length),console.log(e),s.length>0){console.log(Q);const e=ee.filter((e=>e.ppoNo.toString().includes(s)));W(e)}else W(ee)}(e.target.value,"search")}})})}),(0,u.jsx)(r.sK,{children:(0,u.jsx)(r.UF,{md:12,children:(0,u.jsx)(r.V0,{children:"F"===Y?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("h5",{className:"text-center fw-bold",children:"FAMILY PENSIONER DATA"})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("h5",{className:"text-center fw-bold",children:"PENSIONER DATA"})})})})}),(0,u.jsxs)(r._v,{hover:!0,children:[(0,u.jsx)(r.wV,{children:(0,u.jsxs)(r.YI,{children:[(0,u.jsx)(r.$s,{scope:"col",children:"PPO NO"}),(0,u.jsx)(r.$s,{scope:"col",children:"P"===Y?"Pensioner Name":"Family Pensioner Name"}),(0,u.jsx)(r.$s,{scope:"col",children:"Mobile No"}),(0,u.jsx)(r.$s,{scope:"col",children:"AADHAAR No"}),(0,u.jsx)(r.$s,{scope:"col",children:"Actions"})]})}),b?(0,u.jsx)("tbody",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:5,children:(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",width:"100%"},children:(0,u.jsx)(n.A,{color:"#007bff"})})})})}):(0,u.jsx)(r.jS,{children:Q.map(((e,a)=>(0,u.jsxs)(r.YI,{children:[(0,u.jsx)(r.cC,{children:e.ppoNo}),(0,u.jsx)(r.cC,{children:e.name}),(0,u.jsx)(r.cC,{children:e.mobileNumber}),(0,u.jsx)(r.cC,{children:e.aadhaarNo}),(0,u.jsx)(r.cC,{children:(0,u.jsx)(r.Q_,{color:"primary",onClick:()=>function(e){K({}),S(!0);const a=Q.find((a=>a.ppoNo===e));T(a),S(!0),console.log(a),X(!1)}(e.ppoNo),children:"Edit"})})]},a)))})]}),(0,u.jsxs)(r.zS,{backdrop:"static",visible:k,onClose:()=>S(!1),size:"xl",children:[(0,u.jsx)(r.E4,{children:"P"===Y?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.lb,{className:"text-center w-100",children:(0,u.jsx)("strong",{children:"Edit Pensioner Details"})})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.lb,{className:"text-center w-100",children:(0,u.jsx)("strong",{children:"Edit Family Pensioner Details"})})})}),(0,u.jsxs)(r.Tc,{children:[(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"ppoNo",children:"PPO No"}),(0,u.jsx)(r.OG,{type:"text",id:"ppoNo",value:P.ppoNo,disabled:!0})]}),(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"pType",children:"Pension Type"}),(0,u.jsx)(r.OG,{type:"text",id:"pType",value:P.pensionerType,disabled:!0})]}),"F"===Y?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.lb,{className:"text-center mt-1 w-100",children:(0,u.jsx)("strong",{children:"Family Pensioner Details"})})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.lb,{className:"text-center mt-1 w-100",children:(0,u.jsx)("strong",{children:"Pensioner Details"})})})})]}),(0,u.jsx)(r.sK,{children:(0,u.jsxs)(r.UF,{md:10,children:[(0,u.jsx)(r.A6,{htmlFor:"empName",children:"Pensioner Name"}),(0,u.jsx)(r.OG,{type:"text",id:"empName",value:P.name,disabled:!0})]})}),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"gender",children:"Gender"}),(0,u.jsx)(r.OG,{type:"text",id:"Gender",value:P.gender,disabled:!0})]}),(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"dob",children:"Date of Birth"}),(0,u.jsx)(r.OG,{type:"date",id:"dob",value:P.dateOfBirth,disabled:!0})]})]})}),(0,u.jsx)(r.sK,{children:(0,u.jsx)(u.Fragment,{})}),"F"===Y?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.sK,{})," "]}):(0,u.jsx)(u.Fragment,{}),(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"panno",children:"PAN NO"}),(0,u.jsx)(r.OG,{type:"text",maxLength:"10",id:"panNo",name:"panNo",autoComplete:"off",autoCorrect:"off",spellCheck:"false",placeholder:L?"":"Valid Pan Num",value:P.panNo,onChange:ue,invalid:!!O.panNo,ref:N,valid:!O.panNo&&(pe=P.panNo,/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(pe)),feedback:O.panNo}),O.panNo&&(0,u.jsx)("div",{className:"text-danger",children:O.panNumber})]}),(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"aadhaarNo",children:"Aadhaar"}),(0,u.jsx)(r.OG,{type:"text",maxLength:"12",id:"aadhaarNo",name:"aadhaarNo",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:P.aadhaarNo||"",onChange:ue,invalid:!!O.aadhaarNo,ref:j,valid:!O.aadhaarNo&&12===(null===(e=P.aadhaarNo)||void 0===e?void 0:e.length),disabled:"VALID AADHAAR"===P.aadhaarStatus}),"VALID AADHAAR"===P.aadhaarStatus&&(0,u.jsx)("small",{className:"text-muted",children:"Editing Aadhaar is disabled (Verified)"}),O.aadhaarNo&&(0,u.jsx)("div",{className:"text-danger",children:O.aadhaarNo})]})]}),(0,u.jsxs)(r.sK,{className:"mt-3",children:[(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"mobileNumber",children:"Mobile No"}),(0,u.jsx)(r.OG,{type:"text",id:"mobileNumber",name:"mobileNumber",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:P.mobileNumber,onChange:ue,required:!0,invalid:!!O.mobileNumber,ref:g,feedback:O.mobileNumber,valid:!O.mobileNumber&&10===(null===(a=P.mobileNumber)||void 0===a?void 0:a.length)})]}),(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"email",children:"Email"}),(0,u.jsx)(r.OG,{type:"email",id:"email",name:"email",autoComplete:"off",autoCorrect:"off",spellCheck:"false",ref:v,value:P.email||"",onChange:ue,onBlur:()=>{var e;const a=null===(e=P.email)||void 0===e?void 0:e.trim();a&&!he(a)?K((e=>(0,l.A)((0,l.A)({},e),{},{email:"Invalid email address"}))):K((e=>{const{email:a}=e;return(0,i.A)(e,p)}))},valid:(null===(s=P.email)||void 0===s?void 0:s.length)>0&&he(P.email)&&!O.email,invalid:!!O.email})]})]}),(0,u.jsx)(r.lb,{className:"text-center w-100 mt-3",children:(0,u.jsx)("strong",{children:"Address"})}),(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"addressLine1",children:"Address 1"}),(0,u.jsx)(r.OG,{type:"text",id:"addressLine1",name:"addressLine1",value:P.addressLine1,onChange:ue,invalid:!!O.addressLine1,feedback:O.addressLine1})]}),(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"addressLine2",children:"Address 2"}),(0,u.jsx)(r.OG,{type:"text",id:"addressLine2",name:"addressLine2",value:P.addressLine2,onChange:ue,required:!0,invalid:!!O.addressLine2,feedback:O.addressLine2})]})]}),(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"addressLine3",children:"Address 3"}),(0,u.jsx)(r.OG,{type:"text",id:"addressLine3",name:"addressLine3",value:P.addressLine3,onChange:ue,required:!0,invalid:!!O.addressLine3,feedback:O.addressLine3})]}),(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"pincode",children:"Postal Code"}),(0,u.jsx)(r.OG,{type:"number",id:"pincode",name:"pincode",maxLength:"6",value:P.pincode,onChange:ue,required:!0,valid:!O.pincode&&6===(null===(d=P.pincode)||void 0===d?void 0:d.length),invalid:!!O.pincode,feedback:O.pincode})]})]}),(0,u.jsxs)(r.sK,{className:"mt-3 align-items-center",children:[(0,u.jsx)(r.UF,{md:6,className:"mt-2",children:(0,u.jsx)(r.CK,{type:"checkbox",label:"Is the state other than Tamil Nadu?",checked:A,className:"custom-checkbox-label custom-checkbox",inputClassName:"custom-checkbox-input",onChange:()=>{const e=!A;y(e),T((a=>(0,l.A)((0,l.A)({},a),{},{state:e?"":"Tamil Nadu",district:""})))}})}),(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"state",children:"State"}),A?(0,u.jsxs)(r.MT,{id:"state",name:"state",value:P.state,onChange:e=>{ue(e),T((e=>(0,l.A)((0,l.A)({},e),{},{district:""})))},invalid:!!O.state,feedback:O.state,required:!0,children:[(0,u.jsx)("option",{value:"",children:"-- Select State --"}),de.filter((e=>"Tamil Nadu"!==e)).map((e=>(0,u.jsx)("option",{value:e,children:e},e)))]}):(0,u.jsx)(r.OG,{type:"text",id:"state",name:"state",value:P.state,readOnly:!0,onChange:ue,invalid:!!O.state,feedback:O.state,required:!0})]}),(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"district",children:"District"}),"Tamil Nadu"===P.state?(0,u.jsxs)(r.MT,{id:"district",name:"district",value:P.district,onChange:ue,invalid:!!O.district,feedback:O.district,required:!0,children:[(0,u.jsx)("option",{value:"",children:"-- Select District --"}),ce.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))]}):(0,u.jsx)(r.OG,{type:"text",id:"district",name:"district",value:P.district,onChange:ue,invalid:!!O.district,feedback:O.district,required:!0})]})]})]}),(0,u.jsxs)(r.If,{children:[(0,u.jsx)(r.Q_,{color:"secondary",onClick:()=>S(!1),children:"Cancel"}),(0,u.jsx)(r.Q_,{color:"primary",onClick:e=>{if(console.log("errors",O),(()=>{var e,a,s,i,l,t;let n={},r=null;const d=null===(e=P.aadhaarNo)||void 0===e?void 0:e.toString().trim(),o=null===(a=P.panNo)||void 0===a?void 0:a.toString().trim().toUpperCase();let c=null===(s=P.mobileNumber)||void 0===s?void 0:s.toString().trim();null===(i=P.pincode)||void 0===i||i.toString().trim();const m=null===(l=P.email)||void 0===l?void 0:l.toString().trim().toLowerCase();return d?/^\d{12}$/.test(d)||(n.aadhaarNo="Aadhaar must be exactly 12 digits",r||(r="aadhaar")):(n.aadhaarNo="Aadhaar is required",r||(r="aadhaar")),o&&!/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(o)&&(n.panNo="PAN format is invalid (e.g. ABCDE1234F)",r||(r="pan")),c=(null===(t=P.mobileNumber)||void 0===t?void 0:t.toString().trim()).replace(/^0+/,""),c?/^[6-9]\d{9}$/.test(c)||(n.mobileNumber="Mobile number must be exactly 10 digits starting with 6-9",r||(r="mobile")):(n.mobileNumber="Mobile number is required",r||(r="mobile")),m&&(he(m)||(n.email="Invalid email address",r||(r="email"))),K(n),"aadhaar"===r&&j.current?j.current.focus():"pan"===r&&N.current?N.current.focus():"mobile"===r&&g.current?g.current.focus():"email"===r&&v.current&&v.current.focus(),0===Object.keys(n).length})()){console.log(P),console.log("selectedEmployee");let e=o().saveApiData;F((e=>e.map((e=>e.ppoNo===P.ppoNo?(0,l.A)((0,l.A)((0,l.A)({},e),P),{},{flag:"MD",userName:re}):e))));const a=(0,l.A)((0,l.A)({},P),{},{flag:"MD",userName:re});c.A.callEndPoint(e,a).then((e=>{console.log(e),"success"===e.message&&(D(!0),S(!1),_(0),R(" "),G(""),T({}),K({}),alert("Data updated Successfully"),xe(P.pensionerTypeId))}))}},noValidate:!0,validated:L,children:"Save Changes"})]})]})]});var pe}},74319:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});s(65043);var i=s(72450),l=s(11238),t=s(93946),n=s(70579);const r=e=>{let{data:a,fileName:s}=e;return(0,n.jsx)(t.Q_,{onClick:()=>{const e=l.Wp.json_to_sheet(a),t=l.Wp.book_new();l.Wp.book_append_sheet(t,e,"Sheet1");const n=l.M9(t,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/octet-stream"});(0,i.saveAs)(r,"".concat(s,".xlsx"))},color:"warning",className:"rounded m-2",children:"Export to Excel"})}}}]);
//# sourceMappingURL=199.77e8a83e.chunk.js.map