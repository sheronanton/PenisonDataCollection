"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[199,319],{25199:(e,a,i)=>{i.r(a),i.d(a,{default:()=>j});var s=i(80045),t=i(22555),l=i(65043),n=i(19267),r=i(93946),d=i(52879),o=i.n(d),c=i(81366),m=i(79456),h=i(74319),u=(i(44650),i(70579));const x=["email"],p=["email"],j=()=>{var e,a,i,d;const j=(0,l.useRef)(null),N=(0,l.useRef)(null),g=(0,l.useRef)(null),v=(0,l.useRef)(null),b=(0,l.useRef)(null),[f,A]=(0,l.useState)(!1),[y,C]=(0,l.useState)(!1),[F,k]=(0,l.useState)([]),[S,P]=(0,l.useState)(!1),[T,L]=(0,l.useState)({}),[D,O]=(0,l.useState)(!1),[K,U]=(0,l.useState)({}),[E,I]=(0,l.useState)(0),[_,w]=(0,l.useState)(0),[G,M]=(0,l.useState)(""),[$,R]=(0,l.useState)(" ");let[q,B]=(0,l.useState)({});const[V,Z]=(0,l.useState)(),[H,Q]=(0,l.useState)(),[W,Y]=(0,l.useState)([]),[z,J]=(0,l.useState)("P"),[X,ee]=(0,l.useState)(!1),[ae,ie]=(0,l.useState)({}),[se,te]=(0,l.useState)(),[le,ne]=(0,l.useState)(""),re=(0,m.d4)((e=>e.twad.office.officeId)),de=(0,m.d4)((e=>e.twad.userName)),[oe,ce]=(0,l.useState)(["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"]),[me,he]=(0,l.useState)(["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thiruvallur","Thiruvarur","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupathur","Tiruppur","Tiruvannamalai","Vellore","Viluppuram","Virudhunagar"]);(0,l.useEffect)((()=>{const e=document.getElementById("email"),a=setTimeout((()=>{e&&e.value&&e.value!==T.email&&(xe({target:{name:"email",value:e.value}}),ue(e.value.trim())?U((e=>{const{email:a}=e;return(0,s.A)(e,x)})):U((e=>(0,t.A)((0,t.A)({},e),{},{email:"Invalid email address"}))))}),500);return()=>clearTimeout(a)}),[]),(0,l.useEffect)((()=>{const e=document.getElementById("email");e&&(e.focus(),e.blur())}),[]);const ue=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),xe=e=>{console.log(K,"errors");const{name:a}=e.target;let{value:i}=e.target;["addressLine1","addressLine2","addressLine3"].includes(a)||(i=i.trim());let s=(0,t.A)({},K);var l,n;if("aadhaarNo"===a)i=i.replace(/\D/g,""),(null===(l=i)||void 0===l?void 0:l.length)>12&&(i=i.slice(0,12)),12!==(null===(n=i)||void 0===n?void 0:n.length)?s.aadhaarNo="Aadhaar number must be exactly 12 digits":delete s.aadhaarNo,L((e=>(0,t.A)((0,t.A)({},e),{},{[a]:i})));else if("panNo"===a)if(i=i.toUpperCase(),console.log("pan value",i),""===i)i=null,console.log("pan value",i),delete s.panNo,L((e=>(0,t.A)((0,t.A)({},e),{},{[a]:i})));else if(/^[A-Z0-9]*$/.test(i)){var r;10===(null===(r=i)||void 0===r?void 0:r.length)?/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(i)?delete s.panNo:s.panNo="Invalid PAN format":s.panNo="PAN must be exactly 10 characters",L((e=>(0,t.A)((0,t.A)({},e),{},{[a]:i})))}else s.panNo="PAN can contain only letters and digits";else if("mobileNumber"===a){let e=i.replace(/\D/g,"");e=e.replace(/^0+/,""),e.length>10&&(e=e.slice(0,10)),10===e.length&&/^[6-9]/.test(e)?delete s.mobileNumber:s.mobileNumber="Mobile number must be exactly 10 digits and start with 6-9",L((i=>(0,t.A)((0,t.A)({},i),{},{[a]:e})))}else if("email"===a)i=i.toLowerCase(),""===i||ue(i)?delete s.email:s.email="Invalid email address",L((e=>(0,t.A)((0,t.A)({},e),{},{[a]:i})));else if("pincode"===a){let e=i.replace(/\D/g,"");e.length>6&&(e=e.slice(0,6)),6!==e.length?s.pincode="Pincode must be exactly 6 digits":delete s.pincode,U(s),L((i=>(0,t.A)((0,t.A)({},i),{},{[a]:e})))}else L((e=>(0,t.A)((0,t.A)({},e),{},{[a]:i}))),delete s[a];U(s)};function pe(e){J(e),ie({}),A(!0);let a=o().getApiData;const i={paymentOfficeId:re,pensionerTypeId:e};c.A.callEndPoint(a,i).then((e=>{setTimeout((()=>{Y(e),ie(e),k(e),A(!1)}),1e3)}))}return(0,u.jsxs)("div",{className:"ms-3",children:[(0,u.jsx)(r.sK,{children:(0,u.jsxs)(r.$l,{role:"group","aria-label":"Basic checkbox toggle button group",children:[(0,u.jsx)(r.CK,{type:"radio",id:"Pensioner",name:"options",onClick:()=>{pe("P")},button:{color:"primary",variant:"outline"},autoComplete:"off",label:"Pensioner"}),(0,u.jsx)(r.CK,{type:"radio",id:"FamilyPensioner",name:"options",button:{color:"primary",variant:"outline"},autoComplete:"off",onClick:()=>{pe("F")},label:"Family Pensioner"}),(0,u.jsx)(r.UF,{md:8,children:"F"===z?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h.default,{data:W,fileName:"FamilyPensioner"})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h.default,{data:W,fileName:"Pensioner"})})})]})}),(0,u.jsx)(r.sK,{children:(0,u.jsx)(r.UF,{md:6,children:(0,u.jsx)(r.OG,{className:"m-2",type:"text",id:"ppoSearch",name:"ppoSearch",placeholder:"SEARCH BY PPO",value:se,onChange:e=>{!function(e,a){const i=e.trim();if(te(i),"search"===a)if(console.log(e.length),console.log(e),i.length>0){console.log(W);const e=ae.filter((e=>e.ppoNo.toString().includes(i)));Y(e)}else Y(ae)}(e.target.value,"search")}})})}),(0,u.jsx)(r.sK,{children:(0,u.jsx)(r.UF,{md:12,children:(0,u.jsx)(r.V0,{children:"F"===z?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("h5",{className:"text-center fw-bold",children:"FAMILY PENSIONER DATA"})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("h5",{className:"text-center fw-bold",children:"PENSIONER DATA"})})})})}),(0,u.jsxs)(r._v,{hover:!0,children:[(0,u.jsx)(r.wV,{children:(0,u.jsxs)(r.YI,{children:[(0,u.jsx)(r.$s,{scope:"col",children:"PPO NO"}),(0,u.jsx)(r.$s,{scope:"col",children:"P"===z?"Pensioner Name":"Family Pensioner Name"}),(0,u.jsx)(r.$s,{scope:"col",children:"Mobile No"}),(0,u.jsx)(r.$s,{scope:"col",children:"Aadhaar No"}),(0,u.jsx)(r.$s,{scope:"col",children:"Actions"})]})}),f?(0,u.jsx)("tbody",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:5,children:(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",width:"100%"},children:(0,u.jsx)(n.A,{color:"#007bff"})})})})}):(0,u.jsx)(r.jS,{children:W.map(((e,a)=>(0,u.jsxs)(r.YI,{children:[(0,u.jsx)(r.cC,{children:e.ppoNo}),(0,u.jsx)(r.cC,{children:e.name}),(0,u.jsx)(r.cC,{children:e.mobileNumber}),(0,u.jsx)(r.cC,{children:e.aadhaarNo}),(0,u.jsx)(r.cC,{children:(0,u.jsx)(r.Q_,{color:"primary",onClick:()=>function(e){U({}),P(!0);const a=W.find((a=>a.ppoNo===e));L(a),P(!0),console.log(a),ee(!1)}(e.ppoNo),children:"Edit"})})]},a)))})]}),(0,u.jsxs)(r.zS,{backdrop:"static",visible:S,onClose:()=>P(!1),size:"xl",children:[(0,u.jsx)(r.E4,{children:"P"===z?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.lb,{className:"text-center w-100",children:(0,u.jsx)("strong",{children:"Edit Pensioner Details"})})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.lb,{className:"text-center w-100",children:(0,u.jsx)("strong",{children:"Edit Family Pensioner Details"})})})}),(0,u.jsxs)(r.Tc,{children:[(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"ppoNo",children:"PPO No"}),(0,u.jsx)(r.OG,{type:"text",id:"ppoNo",value:T.ppoNo,disabled:!0})]}),(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"pType",children:"Pension Type"}),(0,u.jsx)(r.OG,{type:"text",id:"pType",value:T.pensionerType,disabled:!0})]}),"F"===z?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.lb,{className:"text-center mt-1 w-100",children:(0,u.jsx)("strong",{children:"Family Pensioner Details"})})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.lb,{className:"text-center mt-1 w-100",children:(0,u.jsx)("strong",{children:"Pensioner Details"})})})})]}),(0,u.jsx)(r.sK,{children:(0,u.jsxs)(r.UF,{md:10,children:[(0,u.jsx)(r.A6,{htmlFor:"empName",children:"Pensioner Name"}),(0,u.jsx)(r.OG,{type:"text",id:"empName",value:T.name,disabled:!0})]})}),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"gender",children:"Gender"}),(0,u.jsx)(r.OG,{type:"text",id:"Gender",value:T.gender,disabled:!0})]}),(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"dob",children:"Date of Birth"}),(0,u.jsx)(r.OG,{type:"date",id:"dob",value:T.dateOfBirth,disabled:!0})]})]})}),(0,u.jsx)(r.sK,{children:(0,u.jsx)(u.Fragment,{})}),"F"===z?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.sK,{})," "]}):(0,u.jsx)(u.Fragment,{}),(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"panno",children:"PAN NO"}),(0,u.jsx)(r.OG,{type:"text",maxLength:"10",id:"panNo",name:"panNo",autoComplete:"off",autoCorrect:"off",spellCheck:"false",placeholder:D?"":"Valid Pan Num",value:T.panNo,onChange:xe,invalid:!!K.panNo,ref:N,valid:!K.panNo&&(je=T.panNo,/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(je)),feedback:K.panNo}),K.panNo&&(0,u.jsx)("div",{className:"text-danger",children:K.panNumber})]}),(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"aadhaarNo",children:"Aadhaar"}),(0,u.jsx)(r.OG,{type:"text",maxLength:"12",id:"aadhaarNo",name:"aadhaarNo",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:T.aadhaarNo||"",onChange:xe,invalid:!!K.aadhaarNo,ref:j,valid:!K.aadhaarNo&&12===(null===(e=T.aadhaarNo)||void 0===e?void 0:e.length),disabled:"VALID AADHAAR"===T.aadhaarStatus}),"VALID AADHAAR"===T.aadhaarStatus&&(0,u.jsx)("small",{className:"text-muted",children:"Editing Aadhaar is disabled (Verified)"}),K.aadhaarNo&&(0,u.jsx)("div",{className:"text-danger",children:K.aadhaarNo})]})]}),(0,u.jsxs)(r.sK,{className:"mt-3",children:[(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"mobileNumber",children:"Mobile No"}),(0,u.jsx)(r.OG,{type:"text",id:"mobileNumber",name:"mobileNumber",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:T.mobileNumber,onChange:xe,required:!0,invalid:!!K.mobileNumber,ref:v,feedback:K.mobileNumber,valid:!K.mobileNumber&&10===(null===(a=T.mobileNumber)||void 0===a?void 0:a.length)})]}),(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"email",children:"Email"}),(0,u.jsx)(r.OG,{type:"email",id:"email",name:"email",autoComplete:"off",autoCorrect:"off",spellCheck:"false",ref:b,value:T.email||"",onChange:xe,onBlur:()=>{var e;const a=null===(e=T.email)||void 0===e?void 0:e.trim();a&&!ue(a)?U((e=>(0,t.A)((0,t.A)({},e),{},{email:"Invalid email address"}))):U((e=>{const{email:a}=e;return(0,s.A)(e,p)}))},valid:(null===(i=T.email)||void 0===i?void 0:i.length)>0&&ue(T.email)&&!K.email,invalid:!!K.email})]})]}),(0,u.jsx)(r.lb,{className:"text-center w-100 mt-3",children:(0,u.jsx)("strong",{children:"Address"})}),(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"addressLine1",children:"Address 1"}),(0,u.jsx)(r.OG,{type:"text",id:"addressLine1",name:"addressLine1",value:T.addressLine1,onChange:xe,invalid:!!K.addressLine1,feedback:K.addressLine1})]}),(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"addressLine2",children:"Address 2"}),(0,u.jsx)(r.OG,{type:"text",id:"addressLine2",name:"addressLine2",value:T.addressLine2,onChange:xe,required:!0,invalid:!!K.addressLine2,feedback:K.addressLine2})]})]}),(0,u.jsxs)(r.sK,{children:[(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"addressLine3",children:"Address 3"}),(0,u.jsx)(r.OG,{type:"text",id:"addressLine3",name:"addressLine3",value:T.addressLine3,onChange:xe,required:!0,invalid:!!K.addressLine3,feedback:K.addressLine3})]}),(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"pincode",children:"Postal Code"}),(0,u.jsx)(r.OG,{ref:g,type:"text",inputMode:"numeric",pattern:"\\d{6}",id:"pincode",name:"pincode",maxLength:6,value:T.pincode,onChange:xe,required:!0,valid:!K.pincode&&6===(null===(d=T.pincode)||void 0===d?void 0:d.length),invalid:!!K.pincode,feedback:K.pincode})]})]}),(0,u.jsxs)(r.sK,{className:"mt-3 align-items-center",children:[(0,u.jsx)(r.UF,{md:6,className:"mt-2",children:(0,u.jsx)(r.CK,{type:"checkbox",label:"Is the state other than Tamil Nadu?",checked:y,className:"custom-checkbox-label custom-checkbox",inputClassName:"custom-checkbox-input",onChange:()=>{const e=!y;C(e),L((a=>(0,t.A)((0,t.A)({},a),{},{state:e?"":"Tamil Nadu",district:""})))}})}),(0,u.jsxs)(r.UF,{md:6,children:[(0,u.jsx)(r.A6,{htmlFor:"state",children:"State"}),y?(0,u.jsxs)(r.MT,{id:"state",name:"state",value:T.state,onChange:e=>{xe(e),L((e=>(0,t.A)((0,t.A)({},e),{},{district:""})))},invalid:!!K.state,feedback:K.state,required:!0,children:[(0,u.jsx)("option",{value:"",children:"-- Select State --"}),oe.filter((e=>"Tamil Nadu"!==e)).map((e=>(0,u.jsx)("option",{value:e,children:e},e)))]}):(0,u.jsx)(r.OG,{type:"text",id:"state",name:"state",value:T.state,readOnly:!0,onChange:xe,invalid:!!K.state,feedback:K.state,required:!0})]}),(0,u.jsxs)(r.UF,{md:6,className:"mt-3",children:[(0,u.jsx)(r.A6,{htmlFor:"district",children:"District"}),"Tamil Nadu"===T.state?(0,u.jsxs)(r.MT,{id:"district",name:"district",value:T.district,onChange:xe,invalid:!!K.district,feedback:K.district,required:!0,children:[(0,u.jsx)("option",{value:"",children:"-- Select District --"}),me.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))]}):(0,u.jsx)(r.OG,{type:"text",id:"district",name:"district",value:T.district,onChange:xe,invalid:!!K.district,feedback:K.district,required:!0})]})]})]}),(0,u.jsxs)(r.If,{children:[(0,u.jsx)(r.Q_,{color:"secondary",onClick:()=>P(!1),children:"Cancel"}),(0,u.jsx)(r.Q_,{color:"primary",onClick:e=>{if(console.log("errors",K),(()=>{var e,a,i,s,t,l;let n={},r=null;const d=null===(e=T.aadhaarNo)||void 0===e?void 0:e.toString().trim(),o=null===(a=T.panNo)||void 0===a?void 0:a.toString().trim().toUpperCase();let c=null===(i=T.mobileNumber)||void 0===i?void 0:i.toString().trim();const m=null===(s=T.pincode)||void 0===s?void 0:s.toString().trim(),h=null===(t=T.email)||void 0===t?void 0:t.toString().trim().toLowerCase();d?/^\d{12}$/.test(d)||(n.aadhaarNo="Aadhaar must be exactly 12 digits",r||(r="aadhaar")):(n.aadhaarNo="Aadhaar is required",r||(r="aadhaar")),o&&!/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(o)&&(n.panNo="PAN format is invalid (e.g. ABCDE1234F)",r||(r="pan"));const u=null===(l=T.mobileNumber)||void 0===l?void 0:l.toString().trim();return c=null,u&&(c=u.replace(/^0+/,"")),c?/^[6-9]\d{9}$/.test(c)||(n.mobileNumber="Mobile number must be exactly 10 digits starting with 6-9",r||(r="mobile")):(n.mobileNumber="Mobile number is required",r||(r="mobile")),m?/^\d{6}$/.test(m)||(n.pincode="Pincode must be exactly 6 digits",r||(r="pincode")):(n.pincode="Pincode is required",r||(r="pincode")),h&&(ue(h)||(n.email="Invalid email address",r||(r="email"))),U(n),"aadhaar"===r&&j.current?j.current.focus():"pan"===r&&N.current?N.current.focus():"mobile"===r&&v.current?v.current.focus():"pincode"===r&&g.current?g.current.focus():"email"===r&&b.current&&b.current.focus(),0===Object.keys(n).length})()){console.log(T),console.log("selectedEmployee");let e=o().saveApiData;k((e=>e.map((e=>e.ppoNo===T.ppoNo?(0,t.A)((0,t.A)((0,t.A)({},e),T),{},{flag:"MD",userName:de}):e))));const a=(0,t.A)((0,t.A)({},T),{},{flag:"MD",userName:de});c.A.callEndPoint(e,a).then((e=>{console.log(e),"success"===e.message&&(O(!0),P(!1),w(0),R(" "),M(""),L({}),U({}),alert("Data updated Successfully"),pe(T.pensionerTypeId))}))}},noValidate:!0,validated:D,children:"Save Changes"})]})]})]});var je}},74319:(e,a,i)=>{i.r(a),i.d(a,{default:()=>r});i(65043);var s=i(72450),t=i(11238),l=i(93946),n=i(70579);const r=e=>{let{data:a,fileName:i}=e;return(0,n.jsx)(l.Q_,{onClick:()=>{const e=t.Wp.json_to_sheet(a),l=t.Wp.book_new();t.Wp.book_append_sheet(l,e,"Sheet1");const n=t.M9(l,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/octet-stream"});(0,s.saveAs)(r,"".concat(i,".xlsx"))},color:"warning",className:"rounded m-2",children:"Export to Excel"})}}}]);
//# sourceMappingURL=199.8b49e70c.chunk.js.map