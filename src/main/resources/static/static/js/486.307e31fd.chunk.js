"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[486],{53486:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var i=s(65043),t=s(19267),l=s(93946),n=s(52879),r=s.n(n),d=s(81366),o=s(79456),c=(s(74319),s(44650),s(70579));const m=()=>{var e,a,s,n;const m=(0,i.useRef)(null),h=(0,i.useRef)(null),u=(0,i.useRef)(null),x=(0,i.useRef)(null),[p,j]=(0,i.useState)(!1),[N,g]=(0,i.useState)(!1),[v,b]=(0,i.useState)([]),[f,A]=(0,i.useState)(!1),[y,C]=(0,i.useState)({}),[F,k]=(0,i.useState)(!1),[S,P]=(0,i.useState)({}),[T,L]=(0,i.useState)(0),[D,O]=(0,i.useState)(0),[K,U]=(0,i.useState)(""),[E,I]=(0,i.useState)(" ");let[_,w]=(0,i.useState)({});const[G,M]=(0,i.useState)(),[$,R]=(0,i.useState)(),[B,q]=(0,i.useState)([]),[V,Z]=(0,i.useState)("P"),[H,Q]=(0,i.useState)(!1),[W,Y]=(0,i.useState)({}),[z,J]=(0,i.useState)(),[X,ee]=(0,i.useState)(""),ae=(0,o.d4)((e=>e.twad.office.officeId)),se=(0,o.d4)((e=>e.twad.userName)),[ie,te]=(0,i.useState)(["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"]),[le,ne]=(0,i.useState)(["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thiruvallur","Thiruvarur","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupathur","Tiruppur","Tiruvannamalai","Vellore","Viluppuram","Virudhunagar"]);(0,i.useEffect)((()=>{const e=document.getElementById("email"),a=setTimeout((()=>{e&&e.value&&e.value!==y.email&&(de({target:{name:"email",value:e.value}}),re(e.value.trim())?P((e=>{const{email:a,...s}=e;return s})):P((e=>({...e,email:"Invalid email address"}))))}),500);return()=>clearTimeout(a)}),[]),(0,i.useEffect)((()=>{const e=document.getElementById("email");e&&(e.focus(),e.blur())}),[]);const re=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),de=e=>{console.log(S,"errors");const{name:a}=e.target;let{value:s}=e.target;["addressLine1","addressLine2","addressLine3"].includes(a)||(s=s.trim());let i={...S};var t,l;if("aadhaarNo"===a)s=s.replace(/\D/g,""),(null===(t=s)||void 0===t?void 0:t.length)>12&&(s=s.slice(0,12)),12!==(null===(l=s)||void 0===l?void 0:l.length)?i.aadhaarNo="Aadhaar number must be exactly 12 digits":delete i.aadhaarNo,C((e=>({...e,[a]:s})));else if("panNo"===a)if(s=s.toUpperCase(),console.log("pan value",s),""===s)s=null,console.log("pan value",s),delete i.panNo,C((e=>({...e,[a]:s})));else if(/^[A-Z0-9]*$/.test(s)){var n;10===(null===(n=s)||void 0===n?void 0:n.length)?/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(s)?delete i.panNo:i.panNo="Invalid PAN format":i.panNo="PAN must be exactly 10 characters",C((e=>({...e,[a]:s})))}else i.panNo="PAN can contain only letters and digits";else if("mobileNumber"===a){let e=s.replace(/\D/g,"");e=e.replace(/^0+/,""),e.length>10&&(e=e.slice(0,10)),10===e.length&&/^[6-9]/.test(e)?delete i.mobileNumber:i.mobileNumber="Mobile number must be exactly 10 digits and start with 6-9",C((s=>({...s,[a]:e})))}else if("email"===a)s=s.toLowerCase(),""===s||re(s)?delete i.email:i.email="Invalid email address",C((e=>({...e,[a]:s})));else if("pincode"===a){let e=s.replace(/\D/g,"");e.length>6&&(e=e.slice(0,6)),6!==e.length?i.pincode="Pincode must be exactly 6 digits":delete i.pincode,C((s=>({...s,[a]:e})))}else C((e=>({...e,[a]:s}))),delete i[a];P(i)};function oe(e){Z(e),Y({}),j(!0);let a=r().getApiData;const s={paymentOfficeId:ae,pensionerTypeId:e};d.A.callEndPoint(a,s).then((e=>{setTimeout((()=>{q(e),Y(e),b(e),j(!1)}),1e3)}))}return(0,c.jsxs)("div",{className:"ms-3",children:[(0,c.jsx)(l.sK,{children:(0,c.jsxs)(l.$l,{role:"group","aria-label":"Basic checkbox toggle button group",children:[(0,c.jsx)(l.CK,{type:"radio",id:"Pensioner",name:"options",onClick:()=>{oe("P")},button:{color:"primary",variant:"outline"},autoComplete:"off",label:"Pensioner"}),(0,c.jsx)(l.CK,{type:"radio",id:"FamilyPensioner",name:"options",button:{color:"primary",variant:"outline"},autoComplete:"off",onClick:()=>{oe("F")},label:"Family Pensioner"}),(0,c.jsx)(l.UF,{md:8})]})}),(0,c.jsx)(l.sK,{children:(0,c.jsx)(l.UF,{md:6,children:(0,c.jsx)(l.OG,{className:"m-2",type:"text",id:"ppoSearch",name:"ppoSearch",placeholder:"SEARCH BY PPO",value:z,onChange:e=>{!function(e,a){const s=e.trim();if(J(s),"search"===a)if(console.log(e.length),console.log(e),s.length>0){console.log(B);const e=W.filter((e=>e.ppoNo.toString().includes(s)));q(e)}else q(W)}(e.target.value,"search")}})})}),(0,c.jsx)(l.sK,{children:(0,c.jsx)(l.UF,{md:12,children:(0,c.jsx)(l.V0,{children:"F"===V?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("h5",{className:"text-center fw-bold",children:"FAMILY PENSIONER DATA"})}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("h5",{className:"text-center fw-bold",children:"PENSIONER DATA"})})})})}),(0,c.jsxs)(l._v,{hover:!0,children:[(0,c.jsx)(l.wV,{children:(0,c.jsxs)(l.YI,{children:[(0,c.jsx)(l.$s,{scope:"col",children:"PPO NO"}),(0,c.jsx)(l.$s,{scope:"col",children:"P"===V?"Pensioner Name":"Family Pensioner Name"}),(0,c.jsx)(l.$s,{scope:"col",children:"Mobile No"}),(0,c.jsx)(l.$s,{scope:"col",children:"Aadhaar No"}),(0,c.jsx)(l.$s,{scope:"col",children:"Actions"})]})}),p?(0,c.jsx)("tbody",{children:(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:5,children:(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",width:"100%"},children:(0,c.jsx)(t.A,{color:"#007bff"})})})})}):(0,c.jsx)(l.jS,{children:B.map(((e,a)=>(0,c.jsxs)(l.YI,{children:[(0,c.jsx)(l.cC,{children:e.ppoNo}),(0,c.jsx)(l.cC,{children:e.name}),(0,c.jsx)(l.cC,{children:e.mobileNumber}),(0,c.jsx)(l.cC,{children:e.aadhaarNo}),(0,c.jsx)(l.cC,{children:(0,c.jsx)(l.Q_,{color:"primary",onClick:()=>function(e){P({}),A(!0);const a=B.find((a=>a.ppoNo===e));C(a),A(!0),console.log(a),Q(!1)}(e.ppoNo),children:"Edit"})})]},a)))})]}),(0,c.jsxs)(l.zS,{backdrop:"static",visible:f,onClose:()=>A(!1),size:"xl",children:[(0,c.jsx)(l.E4,{children:"P"===V?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.lb,{className:"text-center w-100",children:(0,c.jsx)("strong",{children:"Edit Pensioner Details"})})}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.lb,{className:"text-center w-100",children:(0,c.jsx)("strong",{children:"Edit Family Pensioner Details"})})})}),(0,c.jsxs)(l.Tc,{children:[(0,c.jsxs)(l.sK,{children:[(0,c.jsxs)(l.UF,{md:6,children:[(0,c.jsx)(l.A6,{htmlFor:"ppoNo",children:"PPO No"}),(0,c.jsx)(l.OG,{type:"text",id:"ppoNo",value:y.ppoNo,disabled:!0})]}),(0,c.jsxs)(l.UF,{md:6,children:[(0,c.jsx)(l.A6,{htmlFor:"pType",children:"Pension Type"}),(0,c.jsx)(l.OG,{type:"text",id:"pType",value:y.pensionerType,disabled:!0})]}),"F"===V?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.lb,{className:"text-center mt-1 w-100",children:(0,c.jsx)("strong",{children:"Family Pensioner Details"})})}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.lb,{className:"text-center mt-1 w-100",children:(0,c.jsx)("strong",{children:"Pensioner Details"})})})})]}),(0,c.jsx)(l.sK,{children:(0,c.jsxs)(l.UF,{md:10,children:[(0,c.jsx)(l.A6,{htmlFor:"empName",children:"Pensioner Name"}),(0,c.jsx)(l.OG,{type:"text",id:"empName",value:y.name,disabled:!0})]})}),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(l.sK,{children:[(0,c.jsxs)(l.UF,{md:6,className:"mt-3",children:[(0,c.jsx)(l.A6,{htmlFor:"gender",children:"Gender"}),(0,c.jsx)(l.OG,{type:"text",id:"Gender",value:y.gender,disabled:!0})]}),(0,c.jsxs)(l.UF,{md:6,className:"mt-3",children:[(0,c.jsx)(l.A6,{htmlFor:"dob",children:"Date of Birth"}),(0,c.jsx)(l.OG,{type:"date",id:"dob",value:y.dateOfBirth,disabled:!0})]})]})}),(0,c.jsx)(l.sK,{children:(0,c.jsx)(c.Fragment,{})}),"F"===V?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.sK,{})," "]}):(0,c.jsx)(c.Fragment,{}),(0,c.jsxs)(l.sK,{children:[(0,c.jsxs)(l.UF,{md:6,className:"mt-3",children:[(0,c.jsx)(l.A6,{htmlFor:"panno",children:"PAN NO"}),(0,c.jsx)(l.OG,{type:"text",maxLength:"10",id:"panNo",name:"panNo",autoComplete:"off",autoCorrect:"off",spellCheck:"false",placeholder:F?"":"Valid Pan Num",value:y.panNo,onChange:de,invalid:!!S.panNo,ref:h,valid:!S.panNo&&(ce=y.panNo,/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(ce)),feedback:S.panNo}),S.panNo&&(0,c.jsx)("div",{className:"text-danger",children:S.panNumber})]}),(0,c.jsxs)(l.UF,{md:6,className:"mt-3",children:[(0,c.jsx)(l.A6,{htmlFor:"aadhaarNo",children:"Aadhaar"}),(0,c.jsx)(l.OG,{type:"text",maxLength:"12",id:"aadhaarNo",name:"aadhaarNo",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:y.aadhaarNo||"",onChange:de,invalid:!!S.aadhaarNo,ref:m,valid:!S.aadhaarNo&&12===(null===(e=y.aadhaarNo)||void 0===e?void 0:e.length),disabled:"VALID AADHAAR"===y.aadhaarStatus}),"VALID AADHAAR"===y.aadhaarStatus&&(0,c.jsx)("small",{className:"text-muted",children:"Editing Aadhaar is disabled (Verified)"}),S.aadhaarNo&&(0,c.jsx)("div",{className:"text-danger",children:S.aadhaarNo})]})]}),(0,c.jsxs)(l.sK,{className:"mt-3",children:[(0,c.jsxs)(l.UF,{md:6,children:[(0,c.jsx)(l.A6,{htmlFor:"mobileNumber",children:"Mobile No"}),(0,c.jsx)(l.OG,{type:"text",id:"mobileNumber",name:"mobileNumber",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:y.mobileNumber,onChange:de,required:!0,invalid:!!S.mobileNumber,ref:u,feedback:S.mobileNumber,valid:!S.mobileNumber&&10===(null===(a=y.mobileNumber)||void 0===a?void 0:a.length)})]}),(0,c.jsxs)(l.UF,{md:6,children:[(0,c.jsx)(l.A6,{htmlFor:"email",children:"Email"}),(0,c.jsx)(l.OG,{type:"email",id:"email",name:"email",autoComplete:"off",autoCorrect:"off",spellCheck:"false",ref:x,value:y.email||"",onChange:de,onBlur:()=>{var e;const a=null===(e=y.email)||void 0===e?void 0:e.trim();a&&!re(a)?P((e=>({...e,email:"Invalid email address"}))):P((e=>{const{email:a,...s}=e;return s}))},valid:(null===(s=y.email)||void 0===s?void 0:s.length)>0&&re(y.email)&&!S.email,invalid:!!S.email})]})]}),(0,c.jsx)(l.lb,{className:"text-center w-100 mt-3",children:(0,c.jsx)("strong",{children:"Address"})}),(0,c.jsxs)(l.sK,{children:[(0,c.jsxs)(l.UF,{md:6,children:[(0,c.jsx)(l.A6,{htmlFor:"addressLine1",children:"Address 1"}),(0,c.jsx)(l.OG,{type:"text",id:"addressLine1",name:"addressLine1",value:y.addressLine1,onChange:de,invalid:!!S.addressLine1,feedback:S.addressLine1})]}),(0,c.jsxs)(l.UF,{md:6,children:[(0,c.jsx)(l.A6,{htmlFor:"addressLine2",children:"Address 2"}),(0,c.jsx)(l.OG,{type:"text",id:"addressLine2",name:"addressLine2",value:y.addressLine2,onChange:de,required:!0,invalid:!!S.addressLine2,feedback:S.addressLine2})]})]}),(0,c.jsxs)(l.sK,{children:[(0,c.jsxs)(l.UF,{md:6,className:"mt-3",children:[(0,c.jsx)(l.A6,{htmlFor:"addressLine3",children:"Address 3"}),(0,c.jsx)(l.OG,{type:"text",id:"addressLine3",name:"addressLine3",value:y.addressLine3,onChange:de,required:!0,invalid:!!S.addressLine3,feedback:S.addressLine3})]}),(0,c.jsxs)(l.UF,{md:6,className:"mt-3",children:[(0,c.jsx)(l.A6,{htmlFor:"pincode",children:"Postal Code"}),(0,c.jsx)(l.OG,{type:"number",id:"pincode",name:"pincode",maxLength:"6",value:y.pincode,onChange:de,required:!0,valid:!S.pincode&&6===(null===(n=y.pincode)||void 0===n?void 0:n.length),invalid:!!S.pincode,feedback:S.pincode})]})]}),(0,c.jsxs)(l.sK,{className:"mt-3 align-items-center",children:[(0,c.jsx)(l.UF,{md:6,className:"mt-2",children:(0,c.jsx)(l.CK,{type:"checkbox",label:"Is the state other than Tamil Nadu?",checked:N,className:"custom-checkbox-label custom-checkbox",inputClassName:"custom-checkbox-input",onChange:()=>{const e=!N;g(e),C((a=>({...a,state:e?"":"Tamil Nadu",district:""})))}})}),(0,c.jsxs)(l.UF,{md:6,children:[(0,c.jsx)(l.A6,{htmlFor:"state",children:"State"}),N?(0,c.jsxs)(l.MT,{id:"state",name:"state",value:y.state,onChange:e=>{de(e),C((e=>({...e,district:""})))},invalid:!!S.state,feedback:S.state,required:!0,children:[(0,c.jsx)("option",{value:"",children:"-- Select State --"}),ie.filter((e=>"Tamil Nadu"!==e)).map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]}):(0,c.jsx)(l.OG,{type:"text",id:"state",name:"state",value:y.state,readOnly:!0,onChange:de,invalid:!!S.state,feedback:S.state,required:!0})]}),(0,c.jsxs)(l.UF,{md:6,className:"mt-3",children:[(0,c.jsx)(l.A6,{htmlFor:"district",children:"District"}),"Tamil Nadu"===y.state?(0,c.jsxs)(l.MT,{id:"district",name:"district",value:y.district,onChange:de,invalid:!!S.district,feedback:S.district,required:!0,children:[(0,c.jsx)("option",{value:"",children:"-- Select District --"}),le.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]}):(0,c.jsx)(l.OG,{type:"text",id:"district",name:"district",value:y.district,onChange:de,invalid:!!S.district,feedback:S.district,required:!0})]})]})]}),(0,c.jsxs)(l.If,{children:[(0,c.jsx)(l.Q_,{color:"secondary",onClick:()=>A(!1),children:"Cancel"}),(0,c.jsx)(l.Q_,{color:"primary",onClick:e=>{if(console.log("errors",S),(()=>{var e,a,s,i,t,l;let n={},r=null;const d=null===(e=y.aadhaarNo)||void 0===e?void 0:e.toString().trim(),o=null===(a=y.panNo)||void 0===a?void 0:a.toString().trim().toUpperCase();let c=null===(s=y.mobileNumber)||void 0===s?void 0:s.toString().trim();null===(i=y.pincode)||void 0===i||i.toString().trim();const p=null===(t=y.email)||void 0===t?void 0:t.toString().trim().toLowerCase();d?/^\d{12}$/.test(d)||(n.aadhaarNo="Aadhaar must be exactly 12 digits",r||(r="aadhaar")):(n.aadhaarNo="Aadhaar is required",r||(r="aadhaar")),o&&!/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(o)&&(n.panNo="PAN format is invalid (e.g. ABCDE1234F)",r||(r="pan"));const j=null===(l=y.mobileNumber)||void 0===l?void 0:l.toString().trim();return c=null,j&&(c=j.replace(/^0+/,"")),c?/^[6-9]\d{9}$/.test(c)||(n.mobileNumber="Mobile number must be exactly 10 digits starting with 6-9",r||(r="mobile")):(n.mobileNumber="Mobile number is required",r||(r="mobile")),p&&(re(p)||(n.email="Invalid email address",r||(r="email"))),P(n),"aadhaar"===r&&m.current?m.current.focus():"pan"===r&&h.current?h.current.focus():"mobile"===r&&u.current?u.current.focus():"email"===r&&x.current&&x.current.focus(),0===Object.keys(n).length})()){console.log(y),console.log("selectedEmployee");let e=r().saveApiData;b((e=>e.map((e=>e.ppoNo===y.ppoNo?{...e,...y,flag:"MD",userName:se}:e))));const a={...y,flag:"MD",userName:se};d.A.callEndPoint(e,a).then((e=>{console.log(e),"success"===e.message&&(k(!0),A(!1),O(0),I(" "),U(""),C({}),P({}),alert("Data updated Successfully"),oe(y.pensionerTypeId))}))}},noValidate:!0,validated:F,children:"Save Changes"})]})]})]});var ce}},74319:(e,a,s)=>{s.d(a,{A:()=>r});s(65043);var i=s(72450),t=s(11238),l=s(93946),n=s(70579);const r=e=>{let{data:a,fileName:s}=e;return(0,n.jsx)(l.Q_,{onClick:()=>{const e=t.Wp.json_to_sheet(a),l=t.Wp.book_new();t.Wp.book_append_sheet(l,e,"Sheet1");const n=t.M9(l,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/octet-stream"});(0,i.saveAs)(r,"".concat(s,".xlsx"))},color:"warning",className:"rounded m-2",children:"Export to Excel"})}}}]);
//# sourceMappingURL=486.307e31fd.chunk.js.map